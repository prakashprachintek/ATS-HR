<sb-layout-dashboard>
    <sb-dashboard-head title="Dashboard" [hideBreadcrumbs]="false"></sb-dashboard-head>
<div class="row" style="margin-left:0%" *ngIf="currentStep=='two'">
  <div class="col-sm-2">
    <h2 style="float: left;">Applicants</h2>
    </div>
     <div class="col-sm-3" style="width: 74px;">
    </div>
  <div class="col-sm-6">
    <div class="form-group has-search">
      <span class="fa fa-search form-control-feedback"></span>
      <input type="text" class="form-control" placeholder="Search" [(ngModel)]="searchText">
    </div>
  </div>
</div>

<div  *ngIf="currentStep=='one'"> 
  <div class="" >
    <div class="col-lg-12">
      <div class="card mb-4" style="background-color: #fff;
      border-radius: 3.3rem;padding-top: 10px;padding-left: 15px;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)">
        <div class="card-body" style="text-align: left;">
          <span>Sample File</span>
          <h2><span class="fa fa-download form-control-feedback" style="font-size: smaller;cursor: pointer;margin-left: 10px;" (click)="downloadReport()"></span></h2>
          <p style="text-align: center;color: red;" *ngIf="uploadError">{{uploadErrorMessage}}</p>
          <div class="container2" appDnd (fileDropped)="onFileDropped($event)">
           
            <input type="file" #fileDropRef id="fileDropRef" (change)="fileBrowseHandler($event.target.files)" accept = ".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"/>
            <svg xmlns="http://www.w3.org/2000/svg" width="63" height="64" viewBox="0 0 63 64">
              <g fill="#3B454F" fill-rule="nonzero">
                <path
                  d="M42.656 15.135a1.953 1.953 0 0 1-1.391-.578L31.5 4.795l-9.765 9.762a1.97 1.97 0 1 1-2.785-2.785L30.106.616a1.97 1.97 0 0 1 2.785 0l11.157 11.156a1.97 1.97 0 0 1-1.392 3.363z" />
                <path
                  d="M31.5 36.791a1.97 1.97 0 0 1-1.969-1.969V2.01a1.97 1.97 0 0 1 3.938 0v32.812a1.97 1.97 0 0 1-1.969 1.969z" />
                <path
                  d="M55.781 63.041H7.22A7.225 7.225 0 0 1 0 55.822V41.385a4.599 4.599 0 0 1 4.594-4.594h7.234a4.567 4.567 0 0 1 4.402 3.276l2.814 9.382a.658.658 0 0 0 .628.467h23.656a.658.658 0 0 0 .628-.467l2.814-9.385a4.572 4.572 0 0 1 4.402-3.273h7.234A4.599 4.599 0 0 1 63 41.385v14.437a7.225 7.225 0 0 1-7.219 7.219zM4.594 40.729a.656.656 0 0 0-.657.656v14.437a3.286 3.286 0 0 0 3.282 3.282H55.78a3.286 3.286 0 0 0 3.282-3.282V41.385a.656.656 0 0 0-.657-.656h-7.234a.65.65 0 0 0-.628.467L47.73 50.58a4.628 4.628 0 0 1-4.402 3.274H19.672a4.567 4.567 0 0 1-4.402-3.276l-2.814-9.382a.65.65 0 0 0-.628-.467H4.594z" />
              </g>
            </svg>
          
            <h3>Drag and drop file here</h3>
            <h3>or</h3>
            <label for="fileDropRef">Browse for file</label>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<div class="card" style="flex-grow: 1;" *ngIf="currentStep=='two'">
  <div class="header">
    <div class="table-responsive">

      <table mat-table matSort class="table table-hover  border-light" (matSortChange)="sortData($event)" 
        [dataSource]="dataSource"  >
        <!-- Name Column -->
        <ng-container matColumnDef="first_name">
          <th mat-header-cell mat-sort-header="first_name" *matHeaderCellDef>First Name </th>
          <td mat-cell *matCellDef="let element" style="text-align: left;padding-top: 10px;"> {{element.first_name}} </td>
        </ng-container>

        <ng-container matColumnDef="last_name">
          <th mat-header-cell mat-sort-header="last_name" *matHeaderCellDef>Last Name </th>
          <td mat-cell *matCellDef="let element" style="text-align: left;padding-top: 10px;"> {{element.last_name}} </td>
        </ng-container>

        <ng-container matColumnDef="phone">
          <th mat-header-cell mat-sort-header="phone" *matHeaderCellDef> Phone </th>
          <td mat-cell *matCellDef="let element" style="text-align: left;padding-top: 10px;"> {{element.phone}} </td>
        </ng-container>

        <ng-container matColumnDef="email">
          <th mat-header-cell mat-sort-header="email" *matHeaderCellDef> Email </th>
          <td mat-cell *matCellDef="let element" style="text-align: left;padding-top: 10px;"> {{element.email?element.email:"NA"}} </td>
        </ng-container>

        <ng-container matColumnDef="applicant_type">
          <th mat-header-cell mat-sort-header="applicant_type" *matHeaderCellDef> Applicant Type </th>
          <td mat-cell *matCellDef="let element" style="text-align: left;padding-top: 10px;"> {{element.applicant_type}} </td>
        </ng-container>

        <ng-container matColumnDef="dob">
          <th mat-header-cell mat-sort-header="dob" *matHeaderCellDef> DOB </th>
          <td mat-cell *matCellDef="let element" style="text-align: left;padding-top: 10px;"> {{element.dob}} </td>
        </ng-container>


        <ng-container matColumnDef="technical_skills">
          <th mat-header-cell mat-sort-header="technical_skills" *matHeaderCellDef> Technical Skills </th>
          <td mat-cell *matCellDef="let element" style="text-align: left;padding-top: 10px;"> {{element.technical_skills}} </td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th mat-header-cell mat-sort-header="action" *matHeaderCellDef> Action </th>
          <td mat-cell *matCellDef="let element" style="text-align: left;">
            <div class="dropdown">
              <button class="dropbtn">
                <div>
                  &#xFE19;
                </div>
                <div class="dropdown-content">
                  <a (click)="deleteApplicant(element)">Delete</a>
                </div>
              </button>
            </div>
          </td>
        </ng-container>


        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      </table>

      <!-- <div class='loader flex flex-row' *ngIf="formatDataLoading" id='loader-2'
        style="text-align: center;margin-right: auto;margin-left: auto;">
        <span></span><span></span><span></span>
      </div> -->
    </div>
  </div>
  <div class="row" style="margin-left: 0% !important;">
    <div class="col-sm-3">
      <button mat-flat-button class="btn btn-primary rounded-pill" (click)="submitData()"  style=" height: 44px;" [disabled]="apiSubmit || totalRecords==0"><span *ngIf="!apiSubmit">
        Continue
    </span>
    <mat-progress-spinner *ngIf="apiSubmit" [diameter]="24"
        [mode]="'indeterminate'"></mat-progress-spinner>
      </button> 

    </div>
    <div class="col-sm-9">
      <mat-paginator [length]= totalRecords
      [pageSize]=pageSize
      [pageIndex]=currentPage
      (page)="handlePage($event)"
      [pageSizeOptions]="[2, 5, 10, 25, 100]"
      showFirstLastButtons
      aria-label="Select page">
    </mat-paginator>
    </div>
  
  </div>
  
</div>

</sb-layout-dashboard>
